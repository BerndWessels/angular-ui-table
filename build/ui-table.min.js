/**
 * ui-table - v0.0.1 - 2013-06-19
 * http://berndwessels.github.io/ui-table
 *
 * Copyright (c) 2013 Bernd Wessels
 * Licensed GPL <https://raw.github.com/berndwessels/ui-table/master/LICENSE>
 */
!function(a,b,c){b.module("uiTable",["monospaced.mousewheel"]).controller("uiTableController",["$scope","$element","$timeout","$compile",function(a,b,d,e){var f=this;f.updateOptions=function(){},f.updateColumns=function(){a.rows&&($.each(a.rows,function(a,b){f.deleteRow(b)}),a.rows=[]),a.vScrollbarOptions.page=0,a.columnScopes&&$.each(a.columnScopes,function(b,c){a.measureHeadColumns.empty(),a.measureHeadCells.empty(),a.fixedLeftHeadColumns.empty(),a.fixedLeftBodyColumns.empty(),a.fixedLeftHeadCells.empty(),a.fixedRightHeadColumns.empty(),a.fixedRightBodyColumns.empty(),a.fixedRightHeadCells.empty(),a.scrollHeadColumns.empty(),a.scrollHeadCells.empty(),c.$destroy()}),a.numberOfColumnsFixedLeft=0,a.numberOfColumnsFixedRight=0,a.columnScopes=[];var b=0,c=0,d=a.linkElement.width(),g=-1,h=-1;$.each(a.uiTableOptions.columns,function(d,e){var f=a.$new();if(a.columnScopes.push(f),f.column=e,isNaN(e.width)===!1)f.width=parseInt(e.width,10),b+=f.width;else{var i=e.width.indexOf("px");i>=0?(f.width=parseInt(e.width.substring(0,i),10),b+=f.width):(i=e.width.indexOf("*"),i>=0&&(f.stars=parseInt(e.width.substring(0,i),10),c+=f.stars))}g=e.fixed&&"left"==e.fixed?d:g,h=!e.fixed||"left"!=e.fixed&&"right"!=e.fixed?d:h}),$.each(a.columnScopes,function(e,f){if(f.hasOwnProperty("stars")){var i=!a.uiTableOptions.columnsWidth||f.column.fixed&&""!==f.column.fixed?d:a.uiTableOptions.columnsWidth;f.width=f.stars*(i-b)/c,f.width<8&&(f.width=8)}f.column.fixed=e>h?"right":e>g?"":"left"}),$.each(a.columnScopes,function(b,c){var d='<div class="cssTableColumn" style="width:'+c.width+'px;"></div>',g=c.column.headTemplate&&c.column.headTemplate.length>0?c.column.headTemplate:'<span ng-bind="column.title"></span>\n<span class="cssTableColumnSort">\n    <i ui-if="column.sort == \'asc\'" class="icon-sort-up"></i>\n    <i ui-if="column.sort == \'desc\'" class="icon-sort-down"></i>\n    <span ui-if="column.sortOrder > 0" ng-bind="column.sortOrder"\n          style="font-size: x-small; vertical-align: top;"></span>\n</span>\n<span class="cssTableColumnTools">\n    <span ui-if="column.fixed == \'left\'" ui-table-column-fix="scroll"><i class="icon-signout"></i></span>\n    <span ui-if="column.fixed == \'right\'" ui-table-column-fix="scroll"><i class="icon-signout icon-flip-horizontal"></i></span>\n    <span ui-if="column.fixed != \'left\'" ui-table-column-fix="left"><i\n            class="icon-signin icon-flip-horizontal"></i></span>\n    <span ui-if="column.fixed != \'right\'" ui-table-column-fix="right"><i class="icon-signin"></i></span>\n    <span ui-table-column-reorder style="cursor:move;"><i class="icon-sort icon-rotate-90"></i></span>\n</span>\n<div ui-table-column-resize class="cssTableColumnResize"></div>',h='<div class="cssTableCell"><div class="cssTableCellContent" style="width:'+c.width+'px;">'+g+"</div></div>";c.measureHeadColumn=$(d),c.measureHeadCell=$(h),c.measureHeadCellContent=$("div.cssTableCellContent",c.measureHeadCell),c.headColumn=$(d),c.headCell=$(h),c.headCellContent=$("div.cssTableCellContent",c.headCell),a.measureHeadColumns.append(c.measureHeadColumn),a.measureHeadCells.append(c.measureHeadCell),c.column.fixed&&"left"==c.column.fixed?(a.fixedLeftHeadColumns.append(c.headColumn),a.fixedLeftBodyColumns.append(c.headColumn),a.fixedLeftHeadCells.append(c.headCell),a.numberOfColumnsFixedLeft++):c.column.fixed&&"right"==c.column.fixed?(a.fixedRightHeadColumns.append(c.headColumn),a.fixedRightBodyColumns.append(c.headColumn),a.fixedRightHeadCells.append(c.headCell),a.numberOfColumnsFixedRight++):(a.scrollHeadColumns.append(c.headColumn),a.scrollBodyColumns.append(c.headColumn),a.scrollHeadCells.append(c.headCell)),c.measureHeadCell=e(c.measureHeadCell)(c),c.headCell=e(c.headCell)(c),c.headCell.attr("unselectable","on").css("user-select","none").on("selectstart",!1),c.headCell.bind("mouseenter.uiTable",function(){f.currentMouseColumnScope=c,$(".cssTableColumnTools",c.headCellContent).fadeIn("fast")}),c.headCell.bind("mouseleave.uiTable",function(){f.currentMouseColumnScope=null,$(".cssTableColumnTools",c.headCellContent).fadeOut(0)}),c.headCell.bind("click.uiTable",function(b){a.$apply(function(){if(""===c.column.sort?c.column.sort="asc":"asc"==c.column.sort?c.column.sort="desc":"desc"==c.column.sort&&(c.column.sort=""),b.shiftKey===!0){var d=0;$.each(a.columnScopes,function(a,b){d=Math.max(b.column.sortOrder,d)}),$.each(a.columnScopes,function(a,b){"asc"!=b.column.sort&&"desc"!=b.column.sort||0!==b.column.sortOrder||(b.column.sortOrder=++d)})}else $.each(a.columnScopes,function(a,b){b.column.sortOrder=0,b!=c&&("asc"==b.column.sort||"desc"==b.column.sort)&&(b.column.sort="")})}),b.preventDefault()})})},f.renderRow=function(b){var d=a.vScrollbarOptions.position;b===c&&(b=d);for(var e=a.uiTableOptions.data,g=$.isArray(e),h=g?e.length:a.uiTableOptions.total,i=a.scrollBodyContainer.height(),j=0,k=0,l=null;k<a.rows.length;){l=a.rows[k];{if(!(l.row.index<d))break;f.deleteRow(l),a.rows.splice(k,1)}}if(0===a.rows.length)return a.rows.push(f.createRow(b,g?e[b]:e(b))),(a.uiTableOptions.rowsHeight||a.uiTableOptions.noCellBinding)&&f.renderRow(b+1),void 0;if(l=a.rows[0],b<l.row.index)return a.rows.unshift(f.createRow(b,g?e[b]:e(b))),(a.uiTableOptions.rowsHeight||a.uiTableOptions.noCellBinding)&&f.renderRow(b+1),void 0;for(k=0;k<a.rows.length;){if(l=a.rows[k],j+=l.height,j>i){k++;break}if(l.row.index+1>=h){k++;break}var m=k<a.rows.length-1?a.rows[k+1]:null;if(!m||m.row.index>l.row.index+1)return a.rows.splice(k+1,0,f.createRow(l.row.index+1,g?e[l.row.index+1]:e(l.row.index+1))),(a.uiTableOptions.rowsHeight||a.uiTableOptions.noCellBinding)&&f.renderRow(b+1),void 0;k++}for(;k<a.rows.length;)l=a.rows[k],l.row.index!=b?(f.deleteRow(l),a.rows.splice(k,1)):k++},f.createRow=function(b,c){var d=a.uiTableOptions.selection[b],g=d?d.isSelected:!1,h='<div class="cssTableRow'+(g?' selected">':'">'),i='<div class="cssTableRow'+(g?' selected">':'">'),j='<div class="cssTableRow'+(g?' selected">':'">'),k='<div class="cssTableRow'+(g?' selected">':'">');$.each(a.columnScopes,function(b,d){var e=d.column.dataTemplate&&d.column.dataTemplate.length>0?d.column.dataTemplate:'<span ng-bind="row.data.'+d.column.field+'"></span>';a.uiTableOptions.noCellBinding&&(e=e.replace("{{"+d.column.field+"}}",c[d.column.field]));var f='<div class="cssTableCell"><div class="cssTableCellContent" style="width:'+d.width+'px;">'+e+"</div></div>";h+=f,d.column.fixed&&"left"==d.column.fixed?i+=f:d.column.fixed&&"right"==d.column.fixed?j+=f:k+=f});var l=a.$new();if(l.row={index:b,data:c,isSelected:g},a.uiTableOptions.noCellBinding?(a.numberOfColumnsFixedLeft>0&&(l.fixedLeftRowElement=$(i+"</div>")),a.numberOfColumnsFixedRight>0&&(l.fixedRightRowElement=$(j+"</div>")),l.scrollRowElement=$(k+"</div>")):(a.uiTableOptions.rowsHeight||a.uiTableOptions.noCellBinding||(l.measureRowElement=e(h+"</div>")(l)),a.numberOfColumnsFixedLeft>0&&(l.fixedLeftRowElement=e(i+"</div>")(l)),a.numberOfColumnsFixedRight>0&&(l.fixedRightRowElement=e(j+"</div>")(l)),l.scrollRowElement=e(k+"</div>")(l),l.fixedLeftRowElement&&(l.fixedLeftRowElement.bind("mouseenter.cssTableRow",function(){l.fixedLeftRowElement.addClass("mouseover"),l.fixedRightRowElement&&l.fixedRightRowElement.addClass("mouseover"),l.scrollRowElement.addClass("mouseover")}),l.fixedLeftRowElement.bind("mouseleave.cssTableRow",function(){l.fixedLeftRowElement.removeClass("mouseover"),l.fixedRightRowElement&&l.fixedRightRowElement.removeClass("mouseover"),l.scrollRowElement.removeClass("mouseover")}),l.fixedLeftRowElement.bind("click.cssTableRow",function(a){f.onClickRow(a,l)})),l.fixedRightRowElement&&(l.fixedRightRowElement.bind("mouseenter.cssTableRow",function(){l.fixedRightRowElement.addClass("mouseover"),l.fixedLeftRowElement&&l.fixedLeftRowElement.addClass("mouseover"),l.scrollRowElement.addClass("mouseover")}),l.fixedRightRowElement.bind("mouseleave.cssTableRow",function(){l.fixedRightRowElement.removeClass("mouseover"),l.fixedLeftRowElement&&l.fixedLeftRowElement.removeClass("mouseover"),l.scrollRowElement.removeClass("mouseover")}),l.fixedRightRowElement.bind("click.cssTableRow",function(a){f.onClickRow(a,l)})),l.scrollRowElement.bind("mouseenter.cssTableRow",function(){l.fixedLeftRowElement&&l.fixedLeftRowElement.addClass("mouseover"),l.fixedRightRowElement&&l.fixedRightRowElement.addClass("mouseover"),l.scrollRowElement.addClass("mouseover")}),l.scrollRowElement.bind("mouseleave.cssTableRow",function(){l.fixedLeftRowElement&&l.fixedLeftRowElement.removeClass("mouseover"),l.fixedRightRowElement&&l.fixedRightRowElement.removeClass("mouseover"),l.scrollRowElement.removeClass("mouseover")}),l.scrollRowElement.bind("click.cssTableRow",function(a){f.onClickRow(a,l)})),0===a.rows.length)l.measureRowElement&&a.measureBodyRows.append(l.measureRowElement),l.fixedLeftRowElement&&a.fixedLeftBodyRows.append(l.fixedLeftRowElement),l.fixedRightRowElement&&a.fixedRightBodyRows.append(l.fixedRightRowElement),a.scrollBodyRows.append(l.scrollRowElement);else for(var m=0;m<a.rows.length;){var n=a.rows[m];if(n.row.index>b){l.measureRowElement&&n.measureRowElement.before(l.measureRowElement),l.fixedLeftRowElement&&n.fixedLeftRowElement.before(l.fixedLeftRowElement),l.fixedRightRowElement&&n.fixedRightRowElement.before(l.fixedRightRowElement),n.scrollRowElement.before(l.scrollRowElement);break}var o=m<a.rows.length-1?a.rows[m+1]:null;if(!o){l.measureRowElement&&n.measureRowElement.after(l.measureRowElement),l.fixedLeftRowElement&&n.fixedLeftRowElement.after(l.fixedLeftRowElement),l.fixedRightRowElement&&n.fixedRightRowElement.after(l.fixedRightRowElement),n.scrollRowElement.after(l.scrollRowElement);break}if(o&&o.row.index>b){l.measureRowElement&&o.measureRowElement.before(l.measureRowElement),l.fixedLeftRowElement&&o.fixedLeftRowElement.before(l.fixedLeftRowElement),l.fixedRightRowElement&&o.fixedRightRowElement.before(l.fixedRightRowElement),o.scrollRowElement.before(l.scrollRowElement);break}m++}if(l.measureRowElement)l.$watch(function(){return l.measureRowElement.height()},function(a){l.fixedLeftRowElement&&$("div.cssTableCellContent",l.fixedLeftRowElement).css({height:a}),l.fixedRightRowElement&&$("div.cssTableCellContent",l.fixedRightRowElement).css({height:a}),$("div.cssTableCellContent",l.scrollRowElement).css({height:a}),l.height=a,f.renderRow(b)});else if(a.uiTableOptions.noCellBinding){var p=Math.max(l.fixedLeftRowElement?l.fixedLeftRowElement.height():0,l.fixedRightRowElement?l.fixedRightRowElement.height():0,l.scrollRowElement.height());l.fixedLeftRowElement&&$("div.cssTableCellContent",l.fixedLeftRowElement).css({height:p}),l.fixedRightRowElement&&$("div.cssTableCellContent",l.fixedRightRowElement).css({height:p}),$("div.cssTableCellContent",l.scrollRowElement).css({height:p}),l.height=p}else l.fixedLeftRowElement&&$("div.cssTableCellContent",l.fixedLeftRowElement).css({height:a.uiTableOptions.rowsHeight}),l.fixedRightRowElement&&$("div.cssTableCellContent",l.fixedRightRowElement).css({height:a.uiTableOptions.rowsHeight}),$("div.cssTableCellContent",l.scrollRowElement).css({height:a.uiTableOptions.rowsHeight}),l.height=a.uiTableOptions.rowsHeight;return a.vScrollbarOptions.page++,l},f.deleteRow=function(b){b.measureRowElement&&(b.measureRowElement.remove(),b.measureRowElement=null),b.fixedLeftRowElement&&(b.fixedLeftRowElement.remove(),b.fixedLeftRowElement=null),b.fixedRightRowElement&&(b.fixedRightRowElement.remove(),b.fixedRightRowElement=null),b.scrollRowElement.remove(),b.scrollRowElement=null,b.$destroy(),a.vScrollbarOptions.page--},f.updateLayout=function(){var b=0;a.numberOfColumnsFixedLeft>0&&(b+=a.fixedLeftHeadCells.width(),a.fixedLeftBodyContainer.height(a.linkElement.height()-a.scrollHeadContainer.height()-16)),a.numberOfColumnsFixedRight>0&&(b+=a.fixedRightHeadCells.width(),a.fixedRightBodyContainer.height(a.linkElement.height()-a.scrollHeadContainer.height()-16)),a.scrollHeadContainer.width(a.linkElement.width()-b-16),a.scrollBodyContainer.width(a.linkElement.width()-b-16),a.scrollBodyContainer.height(a.linkElement.height()-a.scrollHeadContainer.height()-16),a.vScrollbarOptions.size=a.linkElement.height()-a.scrollHeadContainer.height()-16,a.hScrollbarOptions.size=a.linkElement.width()-b-16,a.hScrollbarOptions.page=a.linkElement.width()-b-16,a.hScrollbarOptions.total=a.scrollHeadTable.width();var c=a.hScrollbarOptions.position;c+a.hScrollbarOptions.page>a.hScrollbarOptions.total&&(c=a.hScrollbarOptions.total-a.hScrollbarOptions.page,a.hScrollbarOptions.position=0>c?0:c)},f.onClickRow=function(b,c){a.$apply(function(){b.shiftKey===!1&&b.ctrlKey===!1?(a.uiTableOptions.selection.length=0,$.each(a.rows,function(a,b){b.row.isSelected&&(b.row.isSelected=!1,b.fixedLeftRowElement&&b.fixedLeftRowElement.removeClass("selected"),b.fixedRightRowElement&&b.fixedRightRowElement.removeClass("selected"),b.scrollRowElement.removeClass("selected"))}),a.uiTableOptions.selection[c.row.index]=c.row,c.row.isSelected||(c.row.isSelected=!0,c.fixedLeftRowElement&&c.fixedLeftRowElement.addClass("selected"),c.fixedRightRowElement&&c.fixedRightRowElement.addClass("selected"),c.scrollRowElement.addClass("selected"))):b.shiftKey===!0&&b.ctrlKey===!1||b.ctrlKey===!1})},f.currentMouseColumnScope=null}]).directive("uiTable",["$window","$timeout","$rootScope","$compile",function(){return{controller:"uiTableController",restrict:"C",scope:{uiTableOptions:"="},template:'<div class="cssTable cssMeasure">\n    <div class="cssTableColumnGroup" id="measureHeadColumns">\n        <!-- each col in cols -->\n    </div>\n    <div class="cssTableRowGroup" id="measureHeadCells">\n        <!-- each row in rows -->\n    </div>\n</div>\n<div class="cssTable cssMeasure">\n    <div class="cssTableColumnGroup" id="measureBodyColumns">\n        <!-- each col in cols -->\n    </div>\n    <div class="cssTableRowGroup" id="measureBodyRows">\n        <!-- each row in rows -->\n    </div>\n</div>\n<div class="cssTable" msd-wheel="onMouseWheel($event, $delta, $deltaX, $deltaY)">\n    <div class="cssTableRowGroup">\n        <div class="cssTableRow" id="headRow">\n            <div class="cssTableCell" ng-show="numberOfColumnsFixedLeft > 0">\n                <!-- fixed left headers -->\n                <div class="cssTable">\n                    <div class="cssTableColumnGroup" id="fixedLeftHeadColumns">\n                        <!-- each col in fixedCols -->\n                    </div>\n                    <div class="cssTableRowGroup">\n                        <div class="cssTableRow" id="fixedLeftHeadCells">\n                            <!-- each col in fixedCols -->\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="cssTableCell">\n                <!-- scroll headers -->\n                <div class="cssScrollContainer" id="scrollHeadContainer">\n                    <div class="cssTable" id="scrollHeadTable">\n                        <div class="cssTableColumnGroup" id="scrollHeadColumns">\n                            <!-- each col in scrollCols -->\n                        </div>\n                        <div class="cssTableRowGroup">\n                            <div class="cssTableRow" id="scrollHeadCells">\n                                <!-- each col in scrollCols -->\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="cssTableCell" ng-show="numberOfColumnsFixedRight > 0">\n                <!-- fixed right headers -->\n                <div class="cssTable">\n                    <div class="cssTableColumnGroup" id="fixedRightHeadColumns">\n                        <!-- each col in fixedCols -->\n                    </div>\n                    <div class="cssTableRowGroup">\n                        <div class="cssTableRow" id="fixedRightHeadCells">\n                            <!-- each col in fixedCols -->\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="cssTableCell">\n            </div>\n        </div>\n        <div class="cssTableRow">\n            <div class="cssTableCell" ng-show="numberOfColumnsFixedLeft > 0">\n                <!-- fixed left body -->\n                <div class="cssFixedContainer" id="fixedLeftBodyContainer">\n                    <div class="cssTable">\n                        <div class="cssTableColumnGroup" id="fixedLeftBodyColumns">\n                            <!-- each col in fixedCols -->\n                        </div>\n                        <div class="cssTableRowGroup" id="fixedLeftBodyRows">\n                            <!-- each row in rows -->\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="cssTableCell">\n                <!-- scroll body -->\n                <div class="cssScrollContainer" id="scrollBodyContainer" style="float:left;">\n                    <div class="cssTable" id="scrollBodyTable">\n                        <div class="cssTableColumnGroup" id="scrollBodyColumns">\n                            <!-- each col in scrollCols -->\n                        </div>\n                        <div class="cssTableRowGroup" id="scrollBodyRows">\n                            <!-- each row in rows -->\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="cssTableCell" ng-show="numberOfColumnsFixedRight > 0">\n                <!-- fixed body -->\n                <div class="cssFixedContainer" id="fixedRightBodyContainer">\n                    <div class="cssTable">\n                        <div class="cssTableColumnGroup" id="fixedRightBodyColumns">\n                            <!-- each col in fixedCols -->\n                        </div>\n                        <div class="cssTableRowGroup" id="fixedRightBodyRows">\n                            <!-- each row in rows -->\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="cssTableCell">\n                <div ui-scrollbar ui-scrollbar-options="vScrollbarOptions" style="width:16px;">\n                </div>\n            </div>\n        </div>\n        <div class="cssTableRow">\n            <div class="cssTableCell" ng-show="numberOfColumnsFixedLeft > 0">\n            </div>\n            <div class="cssTableCell">\n                <div ui-scrollbar ui-scrollbar-options="hScrollbarOptions" style="height:16px;">\n                </div>\n            </div>\n            <div class="cssTableCell" ng-show="numberOfColumnsFixedRight > 0">\n            </div>\n            <div class="cssTableCell">\n            </div>\n        </div>\n    </div>\n</div>',compile:function(){return{pre:function(a){a.numberOfColumnsFixedLeft=0,a.numberOfColumnsFixedRight=0,a.onMouseWheel=function(b,c){var d=a.vScrollbarOptions.position-c;0>d&&(d=0),d>a.vScrollbarOptions.total-1&&(d=a.vScrollbarOptions.total-1),a.vScrollbarOptions.position!=d&&(a.vScrollbarOptions.position=d),b.preventDefault()}},post:function(a,b,c,d){a.rows=[],a.vScrollbarOptions={vertical:!0,fullRange:!0,position:0,page:0,total:0,size:0},a.hScrollbarOptions={vertical:!1,fullRange:!1,position:0,page:0,total:0,size:0},a.linkElement=b,a.measureHeadColumns=$("#measureHeadColumns",b),a.measureHeadCells=$("#measureHeadCells",b),a.measureBodyColumns=$("#measureBodyColumns",b),a.measureBodyRows=$("#measureBodyRows",b),a.fixedLeftHeadColumns=$("#fixedLeftHeadColumns",b),a.fixedRightHeadColumns=$("#fixedRightHeadColumns",b),a.fixedLeftHeadCells=$("#fixedLeftHeadCells",b),a.fixedRightHeadCells=$("#fixedRightHeadCells",b),a.fixedLeftBodyColumns=$("#fixedLeftBodyColumns",b),a.fixedRightBodyColumns=$("#fixedRightBodyColumns",b),a.fixedLeftBodyRows=$("#fixedLeftBodyRows",b),a.fixedRightBodyRows=$("#fixedRightBodyRows",b),a.scrollHeadColumns=$("#scrollHeadColumns",b),a.scrollHeadCells=$("#scrollHeadCells",b),a.scrollBodyColumns=$("#scrollBodyColumns",b),a.scrollBodyRows=$("#scrollBodyRows",b),a.fixedLeftBodyContainer=$("#fixedLeftBodyContainer",b),a.fixedRightBodyContainer=$("#fixedRightBodyContainer",b),a.scrollHeadContainer=$("#scrollHeadContainer",b),a.scrollBodyContainer=$("#scrollBodyContainer",b),a.scrollHeadTable=$("#scrollHeadTable",b),a.scrollBodyTable=$("#scrollBodyTable",b),a.$watch("uiTableOptions",function(){a.$watch("uiTableOptions.data",function(b){a.vScrollbarOptions.total=$.isArray(b)?b.length:a.uiTableOptions.total}),a.$watch("uiTableOptions.total",function(b){$.isArray(a.uiTableOptions.data)||(a.vScrollbarOptions.total=b)}),d.updateColumns(),d.updateLayout()}),a.$watch(function(){return a.scrollHeadContainer.height()},function(){d.updateLayout()}),a.$watch(function(){return a.fixedLeftHeadCells.width()},function(){d.updateLayout()}),a.$watch(function(){return a.fixedRightHeadCells.width()},function(){d.updateLayout()}),a.$watch(function(){return a.measureHeadCells.height()},function(b){$("div.cssTableCellContent",a.fixedLeftHeadCells).css({height:b}),$("div.cssTableCellContent",a.fixedRightHeadCells).css({height:b}),$("div.cssTableCellContent",a.scrollHeadCells).css({height:b}),d.updateLayout()}),a.$watch(function(){return a.scrollHeadTable.width()},function(b){a.hScrollbarOptions.total=b}),a.$watch(function(){return a.scrollHeadContainer.width()},function(){a.hScrollbarOptions.total=a.scrollHeadTable.width()}),a.$watch("hScrollbarOptions.position",function(b){a.scrollHeadContainer.scrollLeft(b),a.scrollBodyContainer.scrollLeft(b)}),a.$watch("vScrollbarOptions.position",function(){d.renderRow()})}}}}}]).directive("uiTableColumnResize",[function(){return{require:"^uiTable",restrict:"EAC",scope:!1,template:"",compile:function(){return{pre:function(){},post:function(a,b,c,d){b.parents("div.cssMeasure:first").length>0||(b.bind("click.uiTable",function(){return!1}),b.bind("mousedown.uiTable",function(b){var c=b.pageX,e=a.linkElement.width()-16,f=0,g=null,h=0;$.each(a.columnScopes,function(b,c){f+=c.width,c.column.fixed&&""!==c.column.fixed||(g=c),a===c&&(h=b)}),$(document).bind("mousemove.uiTable",function(b){var i=b.pageX-c,j=a.width+i;8>j&&(j=8);var k=e-f-(j-a.width);if(!(a==g&&k>0)){if(a.measureHeadColumn.css({width:j}),a.measureHeadCellContent.css({width:j}),a.headColumn.css({width:j}),a.headCellContent.css({width:j}),$(".cssTableCell:nth-child("+(h+1)+")",a.measureBodyRows).each(function(){$(this).children(":first").css({width:j})}),a.column.fixed&&"left"==a.column.fixed?$(".cssTableCell:nth-child("+(a.headCell.index()+1)+")",a.fixedLeftBodyRows).each(function(){$(this).children(":first").css({width:j})}):a.column.fixed&&"right"==a.column.fixed?$(".cssTableCell:nth-child("+(a.headCell.index()+1)+")",a.fixedRightBodyRows).each(function(){$(this).children(":first").css({width:j})}):$(".cssTableCell:nth-child("+(a.headCell.index()+1)+")",a.scrollBodyRows).each(function(){$(this).children(":first").css({width:j})}),k>0){var l=g.width+k;g.measureHeadColumn.css({width:l}),g.measureHeadCellContent.css({width:l}),g.headColumn.css({width:l}),g.headCellContent.css({width:l}),$(".cssTableCell:nth-child("+(g.headCell.index()+1)+")",a.measureBodyRows).each(function(){$(this).children(":first").css({width:l})}),g.column.fixed&&"left"==g.column.fixed?$(".cssTableCell:nth-child("+(g.headCell.index()+1)+")",a.fixedLeftBodyRows).each(function(){$(this).children(":first").css({width:l})}):g.column.fixed&&"right"==g.column.fixed?$(".cssTableCell:nth-child("+(g.headCell.index()+1)+")",a.fixedRightBodyRows).each(function(){$(this).children(":first").css({width:l})}):$(".cssTableCell:nth-child("+(g.headCell.index()+1)+")",a.scrollBodyRows).each(function(){$(this).children(":first").css({width:l})})}a.$apply(function(){d.updateLayout()}),b.preventDefault()}}),$(document).bind("mouseup.uiTable",function(b){$(document).unbind(".uiTable");var d=b.pageX-c,h=a.width+d;0>h&&(h=0);var i=e-f-(h-a.width);i>0&&(g.width+=i,g.column.width=g.width),a.width=h,a.column.width=h,b.preventDefault()}),b.preventDefault()}))}}}}}]).directive("uiTableColumnReorder",[function(){return{replace:!0,require:"^uiTable",restrict:"EAC",scope:!1,template:'<span ng-transclude=""></span>',transclude:!0,compile:function(){return{pre:function(){},post:function(a,b,c,d){b.parents("div.cssMeasure:first").length>0||b.bind("mousedown.uiTable",function(b){var c=null;$(document).bind("mousemove.uiTable",function(b){c&&c!==d.currentMouseColumnScope&&c.headCellContent.removeClass("reorder"),a!==d.currentMouseColumnScope&&d.currentMouseColumnScope.headCellContent.addClass("reorder"),c=d.currentMouseColumnScope,b.preventDefault()}),$(document).bind("mouseup.uiTable",function(b){if($(document).unbind(".uiTable"),d.currentMouseColumnScope){d.currentMouseColumnScope.headCellContent.removeClass("reorder");var c=a.columnScopes.indexOf(a),e=a.columnScopes.indexOf(d.currentMouseColumnScope);c>e&&e++,a.$apply(function(){a.column.fixed=d.currentMouseColumnScope.column.fixed,a.uiTableOptions.columns.splice(e,0,a.uiTableOptions.columns.splice(c,1)[0]),d.updateColumns(),d.updateLayout(),d.renderRow()})}b.preventDefault()}),b.preventDefault()})}}}}}]).directive("uiTableColumnFix",[function(){return{replace:!0,require:"^uiTable",restrict:"EAC",scope:!1,template:'<span ng-transclude=""></span>',transclude:!0,compile:function(){return{pre:function(){},post:function(a,b,c,d){b.parents("div.cssMeasure:first").length>0||b.bind("click.uiTable",function(b){var e=null,f=null;$.each(a.columnScopes,function(a,b){(!b.column.fixed||"left"!=b.column.fixed&&"right"!=b.column.fixed)&&(e=e?e:b,f=b)});var g=0;"left"==c.uiTableColumnFix?(g=a.columnScopes.indexOf(e),a.column.fixed="left"):"right"==c.uiTableColumnFix?(g=a.columnScopes.indexOf(f),a.column.fixed="right"):(g=a.columnScopes.indexOf(e),a.column.fixed="");var h=a.columnScopes.indexOf(a.$parent);a.$apply(function(){a.uiTableOptions.columns.splice(g,0,a.uiTableOptions.columns.splice(h,1)[0]),a.columnScopes.splice(g,0,a.columnScopes.splice(h,1)[0]),d.updateColumns(),d.updateLayout(),d.renderRow()}),b.preventDefault()})}}}}}]).directive("uiScrollbar",["$window","$timeout","$rootScope",function(a,b,c){return{replace:!0,restrict:"EAC",scope:{uiScrollbarOptions:"="},template:'<div class="uiScrollbarOuter">\n    <div class="uiScrollbarInner"></div>\n</div>',compile:function(){return{pre:function(){},post:function(a,b){var d=b,e=$("div.uiScrollbarInner",b),f=function(){var b=a.uiScrollbarOptions.fullRange?a.uiScrollbarOptions.page-1:0;a.uiScrollbarOptions.vertical===!0?(d.css({height:a.uiScrollbarOptions.size}),e.css({left:0,top:Math.ceil(a.uiScrollbarOptions.size*a.uiScrollbarOptions.position/(a.uiScrollbarOptions.total+b)),width:d.width(),height:Math.floor(a.uiScrollbarOptions.size*a.uiScrollbarOptions.page/(a.uiScrollbarOptions.total+b))})):(d.css({width:a.uiScrollbarOptions.size}),e.css({top:0,left:Math.ceil(a.uiScrollbarOptions.size*a.uiScrollbarOptions.position/(a.uiScrollbarOptions.total+b)),height:d.height(),width:Math.floor(a.uiScrollbarOptions.size*a.uiScrollbarOptions.page/(a.uiScrollbarOptions.total+b))}))};a.$watch("uiScrollbarOptions",function(){e.unbind(".uiScrollbar"),e.bind("mousedown.uiScrollbar",function(b){var d=a.uiScrollbarOptions.vertical===!0?b.pageY:b.pageX,e=a.uiScrollbarOptions.position;$(document).bind("mousemove.uiScrollbar",function(b){var f=a.uiScrollbarOptions.fullRange?a.uiScrollbarOptions.page-1:0,g=a.uiScrollbarOptions.vertical===!0?b.pageY:b.pageX,h=Math.ceil((g-d)/(a.uiScrollbarOptions.size/(a.uiScrollbarOptions.total+f))),i=e+h;0>i&&(i=0),f=a.uiScrollbarOptions.fullRange?1:a.uiScrollbarOptions.page,i+f>a.uiScrollbarOptions.total&&(i=a.uiScrollbarOptions.total-f),a.uiScrollbarOptions.position!=i&&(c.$$phase||a.$apply(function(){a.uiScrollbarOptions.position=i})),b.preventDefault()}),$(document).mouseup(function(a){$(document).unbind("mousemove.uiScrollbar"),a.preventDefault()}),b.preventDefault()}),a.$watch("uiScrollbarOptions.size",function(){f()}),a.$watch("uiScrollbarOptions.page",function(){f()}),a.$watch("uiScrollbarOptions.total",function(){f()}),a.$watch("uiScrollbarOptions.position",function(){f()})})}}}}}]).directive("uiIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(a,b,d){return function(a,b,e){var f,g;a.$watch(e.uiIf,function(e){f&&(f.remove(),f=c),g&&(g.$destroy(),g=c),e&&(g=a.$new(),d(g,function(a){f=a,b.after(a)}))})}}}}])}(window,window.angular);